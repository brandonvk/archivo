<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Turnado</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css" >
    <style media="screen">
      .body{
        margin-left: 1em;
        margin-right:  1em;
      }
      .titulo{
        text-align: center;
      }
      .agregar{
        text-align: right;
        /* margin-right:0px; */
      }
      .formModal{
        margin-left: 1em;
        margin-right:  1em;
      }
      .campoFecha{
        margin-left: 2em;
      }
    </style>
  </head>
  <body>
    <div class="row">
      <div class="col col-md-12 col-xs-12 col-sm-12">
        <h2 class="titulo">Turnado</h2>
      </div>
      <div class="col col-md-12 col-xs-12 col-sm-12 agregar">
        <button id="addTurno" class="btn btn-success " type="button" name="button" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Agregar</button>
      </div>
    </div>
    <!-- modal -->
    <!-- <button type="button" class="btn btn-primary" >Open modal for @mdo</button> -->

    <!-- <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">New message</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="recipient-name" class="col-form-label">Recipient:</label>
                <input type="text" class="form-control" id="recipient-name">
              </div>
              <div class="form-group">
                <label for="message-text" class="col-form-label">Message:</label>
                <textarea class="form-control" id="message-text"></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Send message</button>
          </div>
        </div>
      </div>
    </div> -->
  </body>
  <script type="text/javascript" src="../js/jquery-3.3.1.js">  </script>
  <script type="text/javascript" src="../js/bootstrap.min.js">  </script>
  <script type="text/javascript">
  // $("#exampleModal").modal("show");
  // setTimeout(function(){
  //   console.log("cerrar");
  //   $("#exampleModal").modal("hide");
  // },1000*5)
    let html={
      modal_head:(id,title) => {
        return head=`<div class="modal fade" id="${id}" tabindex="-1" role="dialog" aria-labelledby="${id}Label" aria-hidden="true">`+
          '<div class="modal-dialog" role="document">'+
            '<div class="modal-content">'+
              '<div class="modal-header">'+
                `<h5 class="modal-title" id="${id}Label">${title}</h5>`+
                '<button type="button" class="close" data-dismiss="modal" aria-label="Close">'+
                  '<span aria-hidden="true">&times;</span>'+
                '</button>'+
              '</div>';
      },modal_foot:(id)=>{
        return foot='<div class="modal-footer">'+
          `<button id="${id}Cancelar" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>`+
          `<button id="${id}Aceptar" type="button" class="btn btn-primary">Aceptar</button>`+
        '</div>';
      },modal_main:(id,title,html_content) => `${html.modal_head(id,title)}${html_content}${html.modal_foot(id)}`,
      modal:{},
      modal_add:(id,title,html_content,cll)=>{
        // console.log(html);
        html.modal[id]=html.modal_main(id,title,html_content,cll);
        $("body").append(html.modal[id]);
        $(`#${id}Aceptar`).click((e)=>cll(true));
        $(`#${id}Cancelar`).click((e)=>cll(false));
        // $("body").load();
        return this;
      }
    }
    turno={
      get:(page,call)=>{
        $.ajax({
          url:"../../class/Turno.php",
          type:'post',
          data:{
            action:"getRows",
            page
          },success:(rows)=>{
            return call(null,JSON.parse(rows));
          },error:(err) => {
            return call(err);
          }
        })
      }
    }
    turno.get(1,(err,rows)=>{
      html.modal_add("turno","Agregar turno",
      `<!--<div><h1>con botas</h1></div>-->
      <form id="formTurno" class="formModal">
      <div class="form-group">
        <label>Entregado por:</label>
        <input id="entregado" name="entregado" type="text" class="form-control">
      </div>
      <div class="form-group">
        <label>Fecha de entrega:</label>
        <input id="dd" name="dd" type="number" class="form-control campoFecha">
        <input id="mm" name="mm" type="number" class="form-control campoFecha">
        <input id="aa" name="aa" type="number" class="form-control campoFecha">
      </div>
      </form>
      `,(quest)=>{
        if(quest) {
          console.log("enviando...");
          $("#turno").modal("hide")
        }
      })
      $("#addTurno").click((e)=>$("#turno").modal("show"))
      if(err) return console.error(err)
      console.log(rows);
    })
  </script>
</html>
